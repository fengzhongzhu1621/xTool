# 性能优化

## 索引优化
* 为经常查询的列创建索引
* 避免在索引列上使用函数，会导致索引失效
* 定期检查索引的效率，使用 EXPLAIN 命令分析查询，确认索引是否被有效使用并及时改进
* 考虑创建一个复合索引
* 使用命令 `OPTIMIZE TABLE` 整理和优化数据库表和索引，减少数据碎片，更新索引统计信息，回收未使用空间，并可能重新排序行以提高存储效率和查询性能。

## 查询优化
* 避免使用 SELECT *，只选择需要的列，可以有效减少内存的使用
* 注意 JOIN 的类型顺序
* 减少子查询和复杂的嵌套查询

## 数据库规范化
* 梳理数据的逻辑关系并进行规范化，减少数据冗余
* 合理设计表结构，避免过多的表连接；通过适当的冗余减少表连接
* 对需要统计分析的表设计合理的字段，接受适当的荣冗余字段

## 缓存策略
* 使用应用层缓存（如 redis），减少数据库访问

## 并发控制
* 使用合适的事务隔离级别
* 避免长事务，减少锁的竞争，避免其他事务长时间等待锁释放
* 对于更新操作，使用乐观锁（通过版本号或时间戳）或悲观锁（在事务开始时显式加锁）来控制并发
* 尽量使用行级锁而不是表级锁，减少锁的范围，提高并发处理能力
* 设置合适的事务超时时间，避免事务长时间占用资源

## 分区和分片
* 对大数据表进行分区，提高查询和维护效率，方便删除历史数据
* 在分布式系统中使用分片技术分散数据负载；水平扩展数据库以应对高并发

## 定期维护
* 清理无用或过期的数据和日志
* 定期执行数据库的维护任务，如优化表、重建索引
* 使用监控工具跟踪性能指标，及时发现问题，比如慢查询

