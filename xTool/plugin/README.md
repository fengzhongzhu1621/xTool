# 插件化架构

采用基于接口编程的思想, 通过把框架功能抽象成一系列的插件组件, 注册到插件工厂, 并由插件工厂实例化插件，组合成完整的框架。


## 插件模型
* 框架层：只定义标准接口，加入插件埋点。
* 插件层：根据定义的标准接口实现插件。
* 应用层：开发需要的插件，通过配置决定框架采用的具体插件。

## 面向切面编程（AOP）

是一种编程范式，主要用于处理系统中分布于各个模块的横切逻辑，常用来解决模调监控，横切日志，链路跟踪，过载保护，预处理等这些跟接口请求相关的问题。

### 核心关注点
每次业务调用，都会执行的相同的业务逻辑，这个相同的业务逻辑就是核心关注点。

### 切面关注点
在每次调用时，还有许多额外的处理操作，比如对数据的预处理、编解码、传输等，它们往往与业务逻辑并不直接相关。

## 拦截器

拦截器采用了面向切面(AOP)的编程思想，通过在框架指定的操作前后设置埋点, 在埋点地方插入一系列的 filter 插件，实现业务逻辑。
最终目的是实现业务逻辑和框架逻辑的解耦。通过filter 预设埋点, 提供了一种在不修改框架代码的情况下给程序动态添加或替换功能的机制。
通过拦截器可以将(比如监控指标上报, 调用链跟踪, 远程日志, 鉴权等)以横切关注点的方式, 插入到框架处理的主流程中.

# Pluggy
拦截器有多种实现方式，可以考虑采用 Pluggy 实现拦截器功能，将每个拦截器作为一个 HookImpl 对象。
